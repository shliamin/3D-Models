<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Tent Model</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Interactive Tent Model</h1>
    <div>
        <label for="width">Width (cm):</label>
        <input type="number" id="width" value="140" step="1" min="1" onchange="updateModel()">
        <label for="depth">Depth (cm):</label>
        <input type="number" id="depth" value="230" step="1" min="1" onchange="updateModel()">
        <label for="height">Height (cm):</label>
        <input type="number" id="height" value="120" step="1" min="1" onchange="updateModel()">
    </div>
    <div id="tentModel" style="width: 100%; height: 600px;"></div>
    <script>
        // Функция для создания координат круга
        function createCircle(radius, centerX, centerY, centerZ, plane, num_points=100) {
            let t = Array.from({length: num_points}, (_, i) => 2 * Math.PI * i / num_points);
            let circle = {x: [], y: [], z: []};
            
            t.forEach(angle => {
                if (plane === 'xy') {
                    circle.x.push(centerX + radius * Math.cos(angle));
                    circle.y.push(centerY + radius * Math.sin(angle));
                    circle.z.push(centerZ);
                } else if (plane === 'xz') {
                    circle.x.push(centerX + radius * Math.cos(angle));
                    circle.y.push(centerY);
                    circle.z.push(centerZ + radius * Math.sin(angle));
                }
            });
        
            return circle;
        }

        // Функция для обновления модели палатки
        function updateModel() {
            // Получение значений в сантиметрах и преобразование их в метры
            const width = parseFloat(document.getElementById('width').value) / 100;
            const depth = parseFloat(document.getElementById('depth').value) / 100;
            const height = parseFloat(document.getElementById('height').value) / 100;

            // Центры и радиусы кругов
            const centerX = width / 2;
            const centerY = depth / 2;
            const radiusX = width / 2;
            const radiusY = depth / 2;
            
            // Создание кругов в плоскостях XY и XZ
            let circle1 = createCircle(radiusX, centerX, 0, height / 2, 'xy');
            let circle2 = createCircle(radiusY, centerX, centerY, height / 2, 'xz');

            let data = [
                {
                    x: circle1.x,
                    y: circle1.y,
                    z: circle1.z,
                    mode: 'lines',
                    line: {
                        color: 'blue',
                        width: 5
                    },
                    type: 'scatter3d'
                },
                {
                    x: circle2.x,
                    y: circle2.y,
                    z: circle2.z,
                    mode: 'lines',
                    line: {
                        color: 'red',
                        width: 5
                    },
                    type: 'scatter3d'
                }
            ];

            let layout = {
                scene: {
                    xaxis: {
                        title: 'Width',
                        dtick: 0.1  // Шаг сетки по оси X 10 см
                    },
                    yaxis: {
                        title: 'Depth',
                        dtick: 0.1  // Шаг сетки по оси Y 10 см
                    },
                    zaxis: {
                        title: 'Height',
                        dtick: 0.1  // Шаг сетки по оси Z 10 см
                    },
                    aspectratio: {x: width, y: depth, z: height}
                },
                margin: {
                    l: 0,
                    r: 0,
                    b: 0,
                    t: 0
                }
            };

            Plotly.newPlot('tentModel', data, layout);
        }

        // Инициализация модели при загрузке страницы
        updateModel();
    </script>
</body>
</html>
